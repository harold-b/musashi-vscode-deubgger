{
  "name"        : "musa-debug",
  "displayName" : "Musashi Debug",
  "version"     : "0.2.0",
  "publisher"   : "Harold Brenes",
  "description" : "Visual Studio Code debug adapter for Duktape on the Musashi Framework.",
  "author": {
    "name": "Harold Brenes"
  },

  "license" : "Private",
  "private" : true,
  "engines" : {
    "vscode" : "^1.1.0",
    "node"   : "^5.10.0"
  },

  "categories": [
    "Debuggers"
  ],

  "bugs": {
    "url": "http://hbrenes.com/cv"
  },

  "dependencies": {
    "vscode-debugprotocol": "^1.11.0-pre.8",
		"vscode-debugadapter": "^1.11.0-pre.6",
    "process": "^0.11.2",
    "source-map": "0.5.3",
    "utf8": "~2.0.0",
    "util": "~0.10.3"
  },

  "devDependencies": {
    "gulp": "^3.9.0",
    "gulp-tsb": "*",
    "gulp-tslint": "^4.3.2",
    "typescript": "^1.7.3",
    "vscode": "^0.11.13",
		"vscode-debugadapter-testsupport": "^1.11.0",
    "run-sequence": "~1.1.5",
    "del": "~2.2.0"
  },

  "scripts": {
		"postinstall": "node ./node_modules/vscode/bin/install"
	},

  "main": "./out/extension",
	"activationEvents": [
		"onCommand:extension.runDukDebugger"
	],

  "contributes": {
    "breakpoints": [
			{
				"language": "javascript"
			},
      {
				"language": "typescript"
			}
		],

    "debuggers": [
      {
        "type": "duk",
        "label": "Duktape JS",

        "program": "./out/DukDebugger.js",
        "runtime": "node",

        "enableBreakpointsFor": {
          "languageIds": [
            "javascript",
            "typescript"
        ]
      },

      "initialConfigurations": [
          {
            "name"              : "Launch",
            "type"              : "duk",
            "request"           : "launch",
            "program"           : "${workspaceRoot}/main.js",
            "args"              : [],
            "cwd"               : "${workspaceRoot}",
            "preLaunchTask"     : "",
            "runtimeExecutable" : null,
            "env"               : {},
            "externalConsole"   : false
          },
          {
            "name"        : "Attach",
            "type"        : "duk",
            "request"     : "attach",
            "address"     : "localhost",
            "port"        : 9091,
            "localRoot"   : "${workspaceRoot}",
            "remoteRoot"  : null,
            "sourceMaps"  : false,
            "stopOnEntry" : false,
            "outDir"      : null
          }
        ],

        "configurationAttributes": {
          "launch": {
            "required": [
              "program"
            ],

            "properties": {
              "program": {
                "type": "string",
                "description": "Workspace relative path to the program."
              },
              "args": {
                "type": "array",
                "description": "Command line arguments passed to the program.",
                "items": {
                  "type": "string"
                },
                "default": []
              },
              "cwd": {
                "type": "string",
                "description": "Workspace relative or absolute path to the working directory of the program being debugged. Default is the current workspace.",
                "default": "."
              },
              "runtimeExecutable": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "Workspace relative or absolute path to the runtime executable to be used. Default is the runtime executable on the PATH.",
                "default": null
              },
              "runtimeArgs": {
                "type": "array",
                "description": "Optional arguments passed to the runtime executable.",
                "items": {
                  "type": "string"
                },
                "default": []
              },
              "env": {
                "type": "object",
                "description": "Environment variables passed to the program.",
                "default": {}
              },
              "externalConsole": {
                "type": "boolean",
                "description": "Launch debug target in external console.",
                "default": false
              }
            }
          },
          "attach": {
            "properties": {
              "port": {
                "type": "number",
                "description": "Debug port to attach to. Default is 27559.",
                "default": "27559"
              },
              "address": {
                "type": "string",
                "description": "TCP/IP address of debug port (for node >= 5.0 only). Default is 'localhost'.",
                "default": "localhost"
              },
              "timeout": {
                "type": "number",
                "description": "Retry for this number of milliseconds to connect to the debug server. Default is 10000 ms.",
                "default": "10000"
              },
              "sourceMaps": {
                "type": "boolean",
                "description": "Use JavaScript source maps (if they exist).",
                "default": true
              },
              "outDir": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "If source maps are enabled, the generated code is expected in this directory. If not specified, the generated code is expected in the same directory as its source.",
                "default": null
              },
              "stopOnEntry": {
                "type": "boolean",
                "description": "Automatically stop program after launch.",
                "default": true
              },
              "localRoot": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "The local source root that corresponds to the 'remoteRoot'.",
                "default": null
              },
              "remoteRoot": {
                "type": [
                  "string",
                  "null"
                ],
                "description": "The source root of the remote host.",
                "default": null
              }
            }
          }
        }
      }
    ]
  }
}
